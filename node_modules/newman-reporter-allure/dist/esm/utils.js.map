{"version":3,"file":"utils.js","names":["extractMetadataFromString","extractMeta","eventList","labels","each","event","listen","script","exec","forEach","line","isCommentLine","trim","startsWith","trimmedCommentValue","replace","metadata","push"],"sources":["../../src/utils.ts"],"sourcesContent":["import type { EventList } from \"postman-collection\";\nimport type { Label } from \"allure-js-commons\";\nimport { extractMetadataFromString } from \"allure-js-commons/sdk\";\n\nexport const extractMeta = (eventList: EventList) => {\n  const labels: Label[] = [];\n\n  eventList.each((event) => {\n    if (event.listen === \"test\" && event.script.exec) {\n      event.script.exec.forEach((line) => {\n        const isCommentLine = line.trim().startsWith(\"//\");\n        if (!isCommentLine) {\n          return;\n        }\n        const trimmedCommentValue = line.trim().replace(\"//\", \"\").trim();\n        const metadata = extractMetadataFromString(trimmedCommentValue);\n        labels.push(...metadata.labels);\n      });\n    }\n  });\n\n  return { labels };\n};\n"],"mappings":"AAEA,SAASA,yBAAyB,QAAQ,uBAAuB;AAEjE,OAAO,IAAMC,WAAW,GAAIC,SAAoB,IAAK;EACnD,IAAMC,MAAe,GAAG,EAAE;EAE1BD,SAAS,CAACE,IAAI,CAAEC,KAAK,IAAK;IACxB,IAAIA,KAAK,CAACC,MAAM,KAAK,MAAM,IAAID,KAAK,CAACE,MAAM,CAACC,IAAI,EAAE;MAChDH,KAAK,CAACE,MAAM,CAACC,IAAI,CAACC,OAAO,CAAEC,IAAI,IAAK;QAClC,IAAMC,aAAa,GAAGD,IAAI,CAACE,IAAI,CAAC,CAAC,CAACC,UAAU,CAAC,IAAI,CAAC;QAClD,IAAI,CAACF,aAAa,EAAE;UAClB;QACF;QACA,IAAMG,mBAAmB,GAAGJ,IAAI,CAACE,IAAI,CAAC,CAAC,CAACG,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAACH,IAAI,CAAC,CAAC;QAChE,IAAMI,QAAQ,GAAGhB,yBAAyB,CAACc,mBAAmB,CAAC;QAC/DX,MAAM,CAACc,IAAI,CAAC,GAAGD,QAAQ,CAACb,MAAM,CAAC;MACjC,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF,OAAO;IAAEA;EAAO,CAAC;AACnB,CAAC","ignoreList":[]}